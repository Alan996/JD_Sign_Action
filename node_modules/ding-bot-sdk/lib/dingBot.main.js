!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e=require("request"),t=require("crypto"),n={"Content-Type":"application/json;charset=utf-8"},o={msgtype:"text",text:{content:"hello~"}},s=function(){function s(e){this._initData={base_url:"",access_token:"",secret:""},this.signFn=function(e,n){var o=t.createHmac("sha256",e).update(n).digest().toString("base64");return encodeURIComponent(o)};var n=e.access_token,o=e.secret,s=e.base_url,i=void 0===s?"https://oapi.dingtalk.com/robot/send":s,r=(new Date).getTime(),c=this.signFn(o,r+"\n"+o);this._webhookUrl=i+"?access_token="+n+"&timestamp="+r+"&sign="+c}return s.prototype.send=function(t){void 0===t&&(t=o);try{var s={headers:n,json:t};e.post(this._webhookUrl,s,(function(e,t,n){console.log("send msg, response: "+JSON.stringify(n))}))}catch(e){return console.error(e),!1}},s}();module.exports=s}));
